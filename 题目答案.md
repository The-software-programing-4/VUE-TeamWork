semaphore mutex1=1,mutex2=0

//mutex1 ç¡®ä¿å†™äº’æ–¥

//mutex2 è¯»æ“ä½œ

//empty ä½™ç¥¨æ˜¯å¦ä¸ºç©º

int cnt = N ; //ä½™ç¥¨çš„æ•°é‡

main()

cobegin{

//Q æ“ä½œ

while(true)

{

   v(mutex2);

   read();

   p(mutex2); 

}

//Bæ“ä½œ

while(true)

{

  p(mutex1);

  p(mutex2);

  if(cnt > 0 )

   cnt -- ; //è´­ç¥¨

  v(mutex2);

  v(mutex1);     

}

}coend



```
int count = 0; //Ã­Â‚ÂPÂ£HÃ¶Ã¿ÃgÃ±Ä‹Âš.
semaphore mutex = 1; //Ã²vcountXÄˆÃ‚%Â›Ã±Ä‹
semaphore w = 1; //tÂ¾â€œ0=â€
writer (){
while(1){
P(w);
P(rw);

â€¦
V(rw);
V(w);
} }
reader (){
while(1){
P(w);
P(mutex);
if(count==0)
P(rw);
count++;
V(mutex);
V(w);
Ã¶Âš.â€¦
P(mutex);
count--;
if(count==0)
V(rw);
V(mutex);
} }
```

