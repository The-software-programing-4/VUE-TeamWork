1. 解：

   （1）36只筷子。理由：出现死锁最坏的情况是每只章鱼7只筷子，此时共35只，当大于35只筷子时候，

   一定会有一只能够正常吃饭，故至少36只。

   （2）当D抓去1红1绿筷子 ，剩余资源1红1绿。此时剩余资源不能满足任何一只章鱼拥有4红4绿，

   即将剩余资源分配给任何一个章鱼，都无法满足其最大需求，因此可能发生死锁，系统不安全，因此不允许此次抓去

4. semaphore mutex1=1,mutex2=0

//mutex1 确保写互斥

//mutex2 读操作

//empty 余票是否为空

int cnt = N ; //余票的数量

main()

cobegin{

//Q 操作

while(true)

{

   v(mutex2);

   read();

   p(mutex2); 

}

//B操作

while(true)

{

  p(mutex1);

  p(mutex2);

  if(cnt > 0 )

   cnt -- ; //购票

  v(mutex2);

  v(mutex1);     

}

}coend



```
int count = 0; //íP£HöÿÏgñċ.
semaphore mutex = 1; //òvcountXĈÂ%ñċ
semaphore w = 1; //t¾“0=”
writer (){
while(1){
P(w);
P(rw);

…
V(rw);
V(w);
} }
reader (){
while(1){
P(w);
P(mutex);
if(count==0)
P(rw);
count++;
V(mutex);
V(w);
ö.…
P(mutex);
count--;
if(count==0)
V(rw);
V(mutex);
} }
```

